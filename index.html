<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEXAPLAY - Top Up Game Terpercaya</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #0a0a0f;
            --bg-secondary: #12121a;
            --fg: #ffffff;
            --muted: #6b7280;
            --accent: #00ff88;
            --accent-dim: rgba(0, 255, 136, 0.15);
            --card: #16161f;
            --border: #2a2a3a;
            --danger: #ff4757;
            --warning: #ffa502;
            --info: #00d4ff;
            --purple: #a855f7;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg);
            color: var(--fg);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .font-display { font-family: 'Orbitron', monospace; }

        /* Background Effects */
        .bg-grid {
            background-image: 
                linear-gradient(rgba(0, 255, 136, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 136, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
        }
        
        .glow-orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            pointer-events: none;
            opacity: 0.5;
        }
        
        .glow-orb-1 { width: 400px; height: 400px; background: radial-gradient(circle, rgba(0, 255, 136, 0.3), transparent); top: -100px; right: -100px; }
        .glow-orb-2 { width: 300px; height: 300px; background: radial-gradient(circle, rgba(0, 200, 255, 0.2), transparent); bottom: 20%; left: -150px; }

        /* Animations */
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }
        @keyframes slide-up { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes pulse-glow { 0%, 100% { box-shadow: 0 0 20px rgba(0, 255, 136, 0.3); } 50% { box-shadow: 0 0 40px rgba(0, 255, 136, 0.5); } }
        @keyframes countdown { from { stroke-dashoffset: 0; } to { stroke-dashoffset: 283; } }
        
        .animate-float { animation: float 6s ease-in-out infinite; }
        .animate-slide-up { animation: slide-up 0.6s ease-out forwards; }
        .animate-pulse-glow { animation: pulse-glow 2s ease-in-out infinite; }
        .stagger-1 { animation-delay: 0.1s; }
        .stagger-2 { animation-delay: 0.2s; }

        /* Cards & Buttons */
        .game-card, .joki-card, .account-card {
            background: linear-gradient(145deg, var(--card), var(--bg-secondary));
            border: 1px solid var(--border);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .game-card:hover, .joki-card:hover, .account-card:hover { transform: translateY(-8px); }
        .game-card:hover { border-color: var(--accent); box-shadow: 0 20px 40px rgba(0, 255, 136, 0.2); }
        .joki-card:hover { border-color: var(--purple); box-shadow: 0 20px 40px rgba(168, 85, 247, 0.3); }
        .account-card:hover { border-color: var(--info); box-shadow: 0 20px 40px rgba(0, 212, 255, 0.3); }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent), #00cc6a);
            color: var(--bg); font-weight: 600; transition: all 0.3s ease;
        }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 10px 30px rgba(0, 255, 136, 0.4); }
        
        .btn-purple { background: linear-gradient(135deg, var(--purple), #7c3aed); color: white; font-weight: 600; transition: all 0.3s ease; }
        .btn-purple:hover { transform: translateY(-2px); box-shadow: 0 10px 30px rgba(168, 85, 247, 0.4); }
        
        .btn-info { background: linear-gradient(135deg, var(--info), #0099cc); color: white; font-weight: 600; transition: all 0.3s ease; }
        .btn-info:hover { transform: translateY(-2px); box-shadow: 0 10px 30px rgba(0, 212, 255, 0.4); }
        
        .btn-secondary { background: transparent; border: 2px solid var(--accent); color: var(--accent); font-weight: 600; transition: all 0.3s ease; }
        .btn-secondary:hover { background: var(--accent); color: var(--bg); }

        /* Modal & Form */
        .modal-backdrop { background: rgba(0, 0, 0, 0.85); backdrop-filter: blur(8px); }
        .modal-content {
            background: linear-gradient(145deg, var(--card), var(--bg-secondary));
            border: 1px solid var(--border);
            animation: slide-up 0.3s ease-out;
        }
        .input-field {
            background: var(--bg); border: 1px solid var(--border);
            color: var(--fg); transition: all 0.3s ease;
        }
        .input-field:focus { outline: none; border-color: var(--accent); box-shadow: 0 0 0 3px var(--accent-dim); }
        
        /* Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--bg); }
        ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--accent); }

        /* Nominal & Payment Cards */
        .nominal-card, .payment-card {
            background: var(--bg); border: 2px solid var(--border);
            transition: all 0.3s ease; cursor: pointer;
        }
        .nominal-card:hover, .payment-card:hover { border-color: var(--accent); background: var(--accent-dim); }
        .nominal-card.selected, .payment-card.selected { border-color: var(--accent); background: var(--accent-dim); box-shadow: 0 0 20px rgba(0, 255, 136, 0.2); }
        
        /* Toast */
        .toast {
            position: fixed; bottom: 20px; right: 20px;
            padding: 16px 24px; border-radius: 12px;
            font-weight: 500; z-index: 2000;
            animation: slide-up 0.3s ease-out;
        }
        .toast-success { background: linear-gradient(135deg, #00ff88, #00cc6a); color: var(--bg); }
        .toast-error { background: linear-gradient(135deg, #ff4757, #ff3838); color: white; }

        /* Mobile Nav */
        .mobile-menu { transform: translateX(-100%); transition: transform 0.3s ease; }
        .mobile-menu.active { transform: translateX(0); }
        
        /* Rank Badge */
        .rank-badge { display: inline-flex; align-items: center; gap: 4px; padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; }
        .rank-bronze { background: rgba(205, 127, 50, 0.2); color: #cd7f32; border: 1px solid #cd7f32; }
        .rank-silver { background: rgba(192, 192, 192, 0.2); color: #c0c0c0; border: 1px solid #c0c0c0; }
        .rank-gold { background: rgba(255, 215, 0, 0.2); color: #ffd700; border: 1px solid #ffd700; }
        .rank-platinum { background: rgba(229, 228, 226, 0.2); color: #e5e4e2; border: 1px solid #e5e4e2; }
        .rank-diamond { background: rgba(185, 242, 255, 0.2); color: #b9f2ff; border: 1px solid #b9f2ff; }
        .rank-master { background: rgba(255, 0, 128, 0.2); color: #ff0080; border: 1px solid #ff0080; }
        .rank-mythic { background: rgba(148, 0, 211, 0.2); color: #9400d3; border: 1px solid #9400d3; }
        .rank-mythical-glory { background: rgba(255, 215, 0, 0.3); color: #ffd700; border: 1px solid #ffd700; box-shadow: 0 0 10px rgba(255, 215, 0, 0.3); }

        /* Section Headers */
        .section-header-joki { background: linear-gradient(135deg, rgba(168, 85, 247, 0.1), transparent); border-left: 4px solid var(--purple); }
        .section-header-account { background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), transparent); border-left: 4px solid var(--info); }

        /* Payment Method Colors */
        .method-dana { border-color: #108ee9 !important; background: rgba(16, 142, 233, 0.1) !important; }
        .method-ovo { border-color: #4c3494 !important; background: rgba(76, 52, 148, 0.1) !important; }
        .method-gopay { border-color: #00aa13 !important; background: rgba(0, 170, 19, 0.1) !important; }
        .method-qris { border-color: #e31937 !important; background: rgba(227, 25, 55, 0.1) !important; }

        /* Copy Button */
        .copy-btn {
            background: var(--accent-dim);
            border: 1px solid var(--accent);
            color: var(--accent);
            transition: all 0.2s ease;
        }
        .copy-btn:hover { background: var(--accent); color: var(--bg); }
        .copy-btn:active { transform: scale(0.95); }

        /* Timer Circle */
        .timer-circle {
            stroke-dasharray: 283;
            stroke-dashoffset: 0;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }

        /* QR Container */
        .qr-container {
            background: white;
            padding: 16px;
            border-radius: 16px;
            display: inline-block;
        }
    </style>
</head>
<body class="bg-grid">
    <div class="glow-orb glow-orb-1"></div>
    <div class="glow-orb glow-orb-2"></div>

    <!-- Navigation -->
    <nav class="fixed top-0 left-0 right-0 z-50 bg-opacity-90 backdrop-blur-xl" style="background: rgba(10, 10, 15, 0.9);">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16 md:h-20">
                <a href="#" class="flex items-center gap-2">
                    <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-[#00ff88] to-[#00cc6a] flex items-center justify-center overflow-hidden">
                        <svg class="w-6 h-6 text-black" fill="currentColor" viewBox="0 0 24 24"><path d="M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-10 7H8v3H6v-3H3v-2h3V8h2v3h3v2zm4.5 2c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm4-3c-.83 0-1.5-.67-1.5-1.5S18.67 9 19.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/></svg>
                    </div>
                    <span class="font-display font-bold text-xl tracking-wider">NEXAPLAY</span>
                </a>

                <div class="hidden md:flex items-center gap-8">
                    <a href="#services" class="text-gray-300 hover:text-[#00ff88] transition-colors font-medium">Layanan</a>
                    <a href="#games" class="text-gray-300 hover:text-[#00ff88] transition-colors font-medium">Top Up</a>
                    <a href="#joki" class="text-gray-300 hover:text-[#a855f7] transition-colors font-medium">Joki Rank</a>
                    <a href="#akun" class="text-gray-300 hover:text-[#00d4ff] transition-colors font-medium">Akun Game</a>
                </div>

                <div class="hidden md:flex items-center gap-3" id="authButtons">
                    <button onclick="openModal('loginModal')" class="btn-secondary px-5 py-2 rounded-lg text-sm">Masuk</button>
                    <button onclick="openModal('registerModal')" class="btn-primary px-5 py-2 rounded-lg text-sm">Daftar</button>
                </div>

                <div class="hidden md:flex items-center gap-4" id="userMenu">
                    <button onclick="openModal('depositModal')" class="flex items-center gap-2 bg-[#16161f] border border-[#2a2a3a] px-4 py-2 rounded-lg hover:border-[#00ff88] transition-all">
                        <svg class="w-5 h-5 text-[#00ff88]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                        <span class="font-semibold text-[#00ff88]" id="navBalance">Rp 0</span>
                    </button>
                    <div class="relative group">
                        <button class="flex items-center gap-2 bg-[#16161f] border border-[#2a2a3a] px-4 py-2 rounded-lg">
                            <div class="w-8 h-8 rounded-full bg-gradient-to-br from-[#00ff88] to-[#00cc6a] flex items-center justify-center text-black font-bold" id="userAvatar">U</div>
                            <span class="font-medium" id="userName">User</span>
                            <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                        </button>
                        <div class="absolute right-0 top-full mt-2 w-48 bg-[#16161f] border border-[#2a2a3a] rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50">
                            <a href="#" onclick="openModal('historyModal'); return false;" class="block px-4 py-3 hover:bg-[#1a1a24] transition-colors rounded-t-lg">
                                <div class="flex items-center gap-3"><svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/></svg><span>Riwayat</span></div>
                            </a>
                            <button onclick="logout()" class="w-full text-left px-4 py-3 hover:bg-[#1a1a24] transition-colors rounded-b-lg text-red-400">
                                <div class="flex items-center gap-3"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/></svg><span>Keluar</span></div>
                            </button>
                        </div>
                    </div>
                </div>

                <button class="md:hidden p-2" onclick="toggleMobileMenu()" aria-label="Menu">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
                </button>
            </div>
        </div>
    </nav>

    <!-- Mobile Menu -->
    <div class="mobile-menu fixed inset-0 z-50 bg-[#0a0a0f]" id="mobileMenu">
        <div class="p-4">
            <div class="flex justify-between items-center mb-8">
                <span class="font-display font-bold text-xl">NEXAPLAY</span>
                <button onclick="toggleMobileMenu()" class="p-2"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg></button>
            </div>
            <div class="flex flex-col gap-4" id="mobileAuthButtons">
                <a href="#games" onclick="toggleMobileMenu()" class="py-3 text-lg">Top Up</a>
                <a href="#joki" onclick="toggleMobileMenu()" class="py-3 text-lg">Joki Rank</a>
                <a href="#akun" onclick="toggleMobileMenu()" class="py-3 text-lg">Akun Game</a>
                <hr class="border-[#2a2a3a] my-4">
                <button onclick="openModal('loginModal'); toggleMobileMenu();" class="btn-secondary py-3 rounded-lg">Masuk</button>
                <button onclick="openModal('registerModal'); toggleMobileMenu();" class="btn-primary py-3 rounded-lg">Daftar</button>
            </div>
            <div class="hidden flex-col gap-4" id="mobileUserMenu">
                <div class="bg-[#16161f] rounded-lg p-4 mb-4">
                    <p class="text-gray-400 text-sm">Saldo Anda</p>
                    <p class="text-2xl font-bold text-[#00ff88]" id="mobileBalance">Rp 0</p>
                </div>
                <a href="#games" onclick="toggleMobileMenu()" class="py-3 text-lg">Top Up</a>
                <a href="#joki" onclick="toggleMobileMenu()" class="py-3 text-lg">Joki Rank</a>
                <a href="#" onclick="openModal('depositModal'); toggleMobileMenu();" class="py-3 text-lg">Deposit Saldo</a>
                <hr class="border-[#2a2a3a] my-4">
                <button onclick="logout(); toggleMobileMenu();" class="text-red-400 py-3">Keluar</button>
            </div>
        </div>
    </div>

    <!-- Hero Section -->
    <section class="relative min-h-screen flex items-center pt-20 overflow-hidden">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20">
            <div class="grid lg:grid-cols-2 gap-12 items-center">
                <div class="opacity-0 animate-slide-up">
                    <div class="inline-flex items-center gap-2 bg-[#00ff88]/10 border border-[#00ff88]/30 rounded-full px-4 py-2 mb-6">
                        <span class="w-2 h-2 bg-[#00ff88] rounded-full animate-pulse"></span>
                        <span class="text-[#00ff88] text-sm font-medium">Platform Top Up Terpercaya #1</span>
                    </div>
                    <h1 class="font-display text-4xl sm:text-5xl lg:text-6xl font-bold leading-tight mb-6">
                        Top Up Game
                        <span class="block text-transparent bg-clip-text bg-gradient-to-r from-[#00ff88] to-[#00cc6a]">Instan & Aman</span>
                    </h1>
                    <p class="text-gray-400 text-lg mb-8 max-w-lg">Isi ulang diamond, UC, dan voucher game favoritmu dengan harga termurah. Proses cepat, layanan 24 jam.</p>
                    <div class="flex flex-wrap gap-4">
                        <a href="#games" class="btn-primary px-8 py-4 rounded-xl text-lg inline-flex items-center gap-2">Mulai Top Up <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg></a>
                        <a href="#services" class="btn-secondary px-8 py-4 rounded-xl text-lg">Lihat Layanan</a>
                    </div>
                </div>
                <div class="relative opacity-0 animate-slide-up stagger-2 hidden lg:block">
                    <div class="relative animate-float">
                        <div class="absolute inset-0 bg-gradient-to-r from-[#00ff88]/20 to-transparent rounded-3xl blur-3xl"></div>
                        <div class="relative bg-gradient-to-br from-[#16161f] to-[#0a0a0f] border border-[#2a2a3a] rounded-3xl p-8">
                            <div class="grid grid-cols-2 gap-4">
                                <div class="game-card rounded-xl p-4 text-center">
                                    <img src="https://placehold.co/100x100/1E3A8A/FFFFFF?text=ML" alt="ML" class="w-16 h-16 mx-auto mb-2 rounded-lg object-cover">
                                    <p class="font-semibold text-sm">Mobile Legends</p>
                                    <p class="text-[#00ff88] text-xs">Diamond</p>
                                </div>
                                <div class="game-card rounded-xl p-4 text-center">
                                    <img src="https://placehold.co/100x100/FF4500/FFFFFF?text=FF" alt="FF" class="w-16 h-16 mx-auto mb-2 rounded-lg object-cover">
                                    <p class="font-semibold text-sm">Free Fire</p>
                                    <p class="text-[#00ff88] text-xs">Diamond</p>
                                </div>
                                <div class="game-card rounded-xl p-4 text-center">
                                    <img src="https://placehold.co/100x100/F4C430/000000?text=PUBG" alt="PUBG" class="w-16 h-16 mx-auto mb-2 rounded-lg object-cover">
                                    <p class="font-semibold text-sm">PUBG Mobile</p>
                                    <p class="text-[#00ff88] text-xs">UC</p>
                                </div>
                                <div class="game-card rounded-xl p-4 text-center">
                                    <img src="https://placehold.co/100x100/00D4FF/FFFFFF?text=GI" alt="GI" class="w-16 h-16 mx-auto mb-2 rounded-lg object-cover">
                                    <p class="font-semibold text-sm">Genshin Impact</p>
                                    <p class="text-[#00ff88] text-xs">Genesis</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Services Section -->
    <section id="services" class="py-20 bg-gradient-to-b from-[#0a0a0f] to-[#12121a]">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="font-display text-3xl sm:text-4xl font-bold mb-4">Layanan Kami</h2>
                <p class="text-gray-400 max-w-2xl mx-auto">Pilih layanan yang sesuai dengan kebutuhan gaming Anda</p>
            </div>
            <div class="grid md:grid-cols-3 gap-8">
                <a href="#games" class="service-card rounded-2xl p-8 text-center group cursor-pointer block bg-[#16161f]/50 border border-[#2a2a3a] hover:border-[#00ff88] transition-all">
                    <div class="w-20 h-20 mx-auto mb-6 rounded-2xl bg-[#00ff88]/10 border border-[#00ff88]/30 flex items-center justify-center overflow-hidden group-hover:scale-110 transition-transform">
                        <img src="https://placehold.co/80x80/00ff88/000000?text=TOPUP" alt="Top Up" class="w-full h-full object-cover p-2">
                    </div>
                    <h3 class="font-display text-xl font-bold mb-3 group-hover:text-[#00ff88] transition-colors">Top Up Game</h3>
                    <p class="text-gray-400 mb-4">Isi ulang diamond, UC, dan currency game favoritmu dengan harga termurah.</p>
                    <span class="inline-flex items-center gap-2 text-[#00ff88] font-medium">Lihat Game <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg></span>
                </a>
                <a href="#joki" class="service-card rounded-2xl p-8 text-center group cursor-pointer block bg-[#16161f]/50 border border-[#2a2a3a] hover:border-purple-500 transition-all">
                    <div class="w-20 h-20 mx-auto mb-6 rounded-2xl bg-purple-500/10 border border-purple-500/30 flex items-center justify-center overflow-hidden group-hover:scale-110 transition-transform">
                        <img src="https://placehold.co/80x80/a855f7/FFFFFF?text=JOKI" alt="Joki" class="w-full h-full object-cover p-2">
                    </div>
                    <h3 class="font-display text-xl font-bold mb-3 group-hover:text-purple-400 transition-colors">Joki Rank</h3>
                    <p class="text-gray-400 mb-4">Naikkan rank game Anda dengan bantuan player profesional.</p>
                    <span class="inline-flex items-center gap-2 text-purple-400 font-medium">Pesan Joki <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg></span>
                </a>
                <a href="#akun" class="service-card rounded-2xl p-8 text-center group cursor-pointer block bg-[#16161f]/50 border border-[#2a2a3a] hover:border-cyan-500 transition-all">
                    <div class="w-20 h-20 mx-auto mb-6 rounded-2xl bg-cyan-500/10 border border-cyan-500/30 flex items-center justify-center overflow-hidden group-hover:scale-110 transition-transform">
                        <img src="https://placehold.co/80x80/00d4ff/FFFFFF?text=AKUN" alt="Akun" class="w-full h-full object-cover p-2">
                    </div>
                    <h3 class="font-display text-xl font-bold mb-3 group-hover:text-cyan-400 transition-colors">Akun Game</h3>
                    <p class="text-gray-400 mb-4">Beli akun game dengan skin langka dan rank tinggi bergaransi.</p>
                    <span class="inline-flex items-center gap-2 text-cyan-400 font-medium">Lihat Akun <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg></span>
                </a>
            </div>
        </div>
    </section>

    <!-- Games Section -->
    <section class="py-20" id="games">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="font-display text-3xl sm:text-4xl font-bold mb-4">Top Up Game</h2>
                <p class="text-gray-400 max-w-2xl mx-auto">Tersedia berbagai pilihan game populer dengan harga terjangkau</p>
            </div>
            <div class="flex flex-col sm:flex-row gap-4 mb-8">
                <div class="relative flex-1">
                    <input type="text" id="searchGame" placeholder="Cari game..." class="input-field w-full pl-12 pr-4 py-3 rounded-xl">
                    <svg class="w-5 h-5 text-gray-500 absolute left-4 top-1/2 -translate-y-1/2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
                </div>
                <div class="flex gap-2 overflow-x-auto pb-2">
                    <button class="filter-btn active px-4 py-2 rounded-lg bg-[#00ff88] text-black font-medium whitespace-nowrap" data-filter="all">Semua</button>
                    <button class="filter-btn px-4 py-2 rounded-lg bg-[#16161f] text-gray-400 font-medium whitespace-nowrap hover:text-white transition-colors" data-filter="mobile">Mobile</button>
                    <button class="filter-btn px-4 py-2 rounded-lg bg-[#16161f] text-gray-400 font-medium whitespace-nowrap hover:text-white transition-colors" data-filter="pc">PC</button>
                </div>
            </div>
            <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 sm:gap-6" id="gamesGrid"></div>
        </div>
    </section>

    <!-- Joki Rank Section -->
    <section class="py-20 bg-gradient-to-b from-[#0a0a0f] to-[#12121a]" id="joki">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="section-header-joki rounded-r-2xl p-6 mb-12">
                <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                    <div>
                        <h2 class="font-display text-3xl sm:text-4xl font-bold mb-2 text-purple-400">Joki Rank</h2>
                        <p class="text-gray-400">Naikkan rank game Anda dengan bantuan player profesional</p>
                    </div>
                </div>
            </div>
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6" id="jokiGrid"></div>
        </div>
    </section>

    <!-- Akun Game Section -->
    <section class="py-20" id="akun">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="section-header-account rounded-r-2xl p-6 mb-12">
                <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                    <div>
                        <h2 class="font-display text-3xl sm:text-4xl font-bold mb-2 text-cyan-400">Akun Game</h2>
                        <p class="text-gray-400">Beli akun game dengan skin langka dan rank tinggi</p>
                    </div>
                </div>
            </div>
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6" id="accountGrid"></div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="py-12 border-t border-[#2a2a3a]">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid md:grid-cols-4 gap-8 mb-8">
                <div>
                    <div class="flex items-center gap-2 mb-4">
                        <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-[#00ff88] to-[#00cc6a] flex items-center justify-center">
                            <svg class="w-6 h-6 text-black" fill="currentColor" viewBox="0 0 24 24"><path d="M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-10 7H8v3H6v-3H3v-2h3V8h2v3h3v2zm4.5 2c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm4-3c-.83 0-1.5-.67-1.5-1.5S18.67 9 19.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/></svg>
                        </div>
                        <span class="font-display font-bold text-xl">NEXAPLAY</span>
                    </div>
                    <p class="text-gray-400 text-sm">Platform top up game terpercaya dengan harga termurah dan proses tercepat.</p>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Game Populer</h4>
                    <ul class="space-y-2 text-gray-400 text-sm">
                        <li><a href="#games" class="hover:text-[#00ff88] transition-colors">Mobile Legends</a></li>
                        <li><a href="#games" class="hover:text-[#00ff88] transition-colors">Free Fire</a></li>
                        <li><a href="#games" class="hover:text-[#00ff88] transition-colors">PUBG Mobile</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Layanan</h4>
                    <ul class="space-y-2 text-gray-400 text-sm">
                        <li><a href="#games" class="hover:text-[#00ff88] transition-colors">Top Up Diamond</a></li>
                        <li><a href="#joki" class="hover:text-purple-400 transition-colors">Joki Rank</a></li>
                        <li><a href="#akun" class="hover:text-cyan-400 transition-colors">Akun Game</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Metode Pembayaran</h4>
                     <ul class="space-y-2 text-gray-400 text-sm">
                        <li>QRIS, Dana, OVO, GoPay</li>
                        <li>Transfer Bank</li>
                    </ul>
                </div>
            </div>
            <div class="pt-8 border-t border-[#2a2a3a] text-center text-gray-500 text-sm">
                <p>2025 NEXAPLAY. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- MODALS -->

    <!-- Login Modal -->
    <div class="fixed inset-0 z-50 hidden" id="loginModal">
        <div class="modal-backdrop absolute inset-0" onclick="closeModal('loginModal')"></div>
        <div class="relative min-h-screen flex items-center justify-center p-4">
            <div class="modal-content w-full max-w-md rounded-2xl p-8">
                <div class="text-center mb-8"><h3 class="font-display text-2xl font-bold mb-2">Masuk</h3><p class="text-gray-400">Masuk ke akun NEXAPLAY kamu</p></div>
                <form id="loginForm" onsubmit="handleLogin(event)">
                    <div class="space-y-4">
                        <div><label class="block text-sm font-medium mb-2">Email</label><input type="email" id="loginEmail" required class="input-field w-full px-4 py-3 rounded-xl" placeholder="email@example.com"></div>
                        <div><label class="block text-sm font-medium mb-2">Password</label><input type="password" id="loginPassword" required class="input-field w-full px-4 py-3 rounded-xl" placeholder="Masukkan password"></div>
                    </div>
                    <button type="submit" class="btn-primary w-full py-4 rounded-xl mt-6 text-lg">Masuk</button>
                </form>
                <p class="text-center text-gray-400 mt-6">Belum punya akun? <button onclick="closeModal('loginModal'); openModal('registerModal')" class="text-[#00ff88] hover:underline">Daftar sekarang</button></p>
            </div>
        </div>
    </div>

    <!-- Register Modal -->
    <div class="fixed inset-0 z-50 hidden" id="registerModal">
        <div class="modal-backdrop absolute inset-0" onclick="closeModal('registerModal')"></div>
        <div class="relative min-h-screen flex items-center justify-center p-4">
            <div class="modal-content w-full max-w-md rounded-2xl p-8">
                <div class="text-center mb-8"><h3 class="font-display text-2xl font-bold mb-2">Daftar</h3><p class="text-gray-400">Buat akun NEXAPLAY baru</p></div>
                <form id="registerForm" onsubmit="handleRegister(event)">
                    <div class="space-y-4">
                        <div><label class="block text-sm font-medium mb-2">Nama Lengkap</label><input type="text" id="registerName" required class="input-field w-full px-4 py-3 rounded-xl" placeholder="Nama lengkap"></div>
                        <div><label class="block text-sm font-medium mb-2">Email</label><input type="email" id="registerEmail" required class="input-field w-full px-4 py-3 rounded-xl" placeholder="email@example.com"></div>
                        <div><label class="block text-sm font-medium mb-2">Password</label><input type="password" id="registerPassword" required minlength="6" class="input-field w-full px-4 py-3 rounded-xl" placeholder="Min. 6 karakter"></div>
                        <div><label class="block text-sm font-medium mb-2">Konfirmasi Password</label><input type="password" id="registerPasswordConfirm" required class="input-field w-full px-4 py-3 rounded-xl" placeholder="Ulangi password"></div>
                    </div>
                    <button type="submit" class="btn-primary w-full py-4 rounded-xl mt-6 text-lg">Daftar</button>
                </form>
                <p class="text-center text-gray-400 mt-6">Sudah punya akun? <button onclick="closeModal('registerModal'); openModal('loginModal')" class="text-[#00ff88] hover:underline">Masuk</button></p>
            </div>
        </div>
    </div>

    <!-- Deposit Modal -->
    <div class="fixed inset-0 z-50 hidden" id="depositModal">
        <div class="modal-backdrop absolute inset-0" onclick="closeModal('depositModal')"></div>
        <div class="relative min-h-screen flex items-center justify-center p-4">
            <div class="modal-content w-full max-w-lg rounded-2xl p-8 max-h-[90vh] overflow-y-auto">
                <div class="text-center mb-8"><h3 class="font-display text-2xl font-bold mb-2">Deposit Saldo</h3><p class="text-gray-400">Isi saldo akun NEXAPLAY kamu</p></div>
                <form id="depositForm" onsubmit="handleDeposit(event)">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-3">Pilih Nominal</label>
                            <div class="grid grid-cols-3 gap-3">
                                <div class="nominal-card rounded-xl p-4 text-center" data-amount="10000" onclick="selectDepositAmount(this)"><p class="font-semibold">Rp 10.000</p></div>
                                <div class="nominal-card rounded-xl p-4 text-center" data-amount="50000" onclick="selectDepositAmount(this)"><p class="font-semibold">Rp 50.000</p></div>
                                <div class="nominal-card rounded-xl p-4 text-center" data-amount="100000" onclick="selectDepositAmount(this)"><p class="font-semibold">Rp 100.000</p></div>
                                <div class="nominal-card rounded-xl p-4 text-center" data-amount="200000" onclick="selectDepositAmount(this)"><p class="font-semibold">Rp 200.000</p></div>
                                <div class="nominal-card rounded-xl p-4 text-center" data-amount="500000" onclick="selectDepositAmount(this)"><p class="font-semibold">Rp 500.000</p></div>
                                <div class="nominal-card rounded-xl p-4 text-center" data-amount="1000000" onclick="selectDepositAmount(this)"><p class="font-semibold">Rp 1.000.000</p></div>
                            </div>
                        </div>
                        <div><label class="block text-sm font-medium mb-2">Atau masukkan nominal lain</label><input type="number" id="depositAmount" min="10000" class="input-field w-full px-4 py-3 rounded-xl" placeholder="Minimal Rp 10.000"></div>
                        
                        <!-- Payment Methods Section -->
                        <div>
                            <label class="block text-sm font-medium mb-3">Metode Pembayaran</label>
                            <div class="space-y-3" id="depositPaymentMethods">
                                <!-- E-Wallets -->
                                <div class="border-b border-[#2a2a3a] pb-2 mb-2"><span class="text-xs text-gray-500 font-semibold uppercase">E-Wallet</span></div>
                                <div class="grid grid-cols-2 gap-3">
                                    <div class="payment-card rounded-xl p-3 flex items-center gap-3 cursor-pointer" data-method="dana" onclick="selectPaymentMethod(this, 'deposit')">
                                        <div class="w-10 h-10 rounded-lg bg-[#108ee9] flex items-center justify-center text-white font-bold text-sm">D</div>
                                        <span class="font-semibold">DANA</span>
                                    </div>
                                    <div class="payment-card rounded-xl p-3 flex items-center gap-3 cursor-pointer" data-method="ovo" onclick="selectPaymentMethod(this, 'deposit')">
                                        <div class="w-10 h-10 rounded-lg bg-[#4c3494] flex items-center justify-center text-white font-bold text-sm">O</div>
                                        <span class="font-semibold">OVO</span>
                                    </div>
                                    <div class="payment-card rounded-xl p-3 flex items-center gap-3 cursor-pointer" data-method="gopay" onclick="selectPaymentMethod(this, 'deposit')">
                                        <div class="w-10 h-10 rounded-lg bg-[#00aa13] flex items-center justify-center text-white font-bold text-sm">G</div>
                                        <span class="font-semibold">GoPay</span>
                                    </div>
                                    <div class="payment-card rounded-xl p-3 flex items-center gap-3 cursor-pointer" data-method="qris" onclick="selectPaymentMethod(this, 'deposit')">
                                        <div class="w-10 h-10 rounded-lg bg-[#e31937] flex items-center justify-center text-white font-bold text-sm">Q</div>
                                        <span class="font-semibold">QRIS</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button type="submit" class="btn-primary w-full py-4 rounded-xl mt-6 text-lg">Lanjutkan Pembayaran</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Top Up Modal -->
    <div class="fixed inset-0 z-50 hidden" id="topupModal">
        <div class="modal-backdrop absolute inset-0" onclick="closeModal('topupModal')"></div>
        <div class="relative min-h-screen flex items-center justify-center p-4">
            <div class="modal-content w-full max-w-2xl rounded-2xl p-8 max-h-[90vh] overflow-y-auto">
                <div class="flex items-center gap-4 mb-8">
                    <div class="w-16 h-16 rounded-xl bg-gradient-to-br from-[#16161f] to-[#0a0a0f] border border-[#2a2a3a] flex items-center justify-center overflow-hidden">
                        <img id="topupGameIcon" src="" alt="Game Icon" class="w-full h-full object-cover">
                    </div>
                    <div>
                        <h3 class="font-display text-xl font-bold" id="topupGameName">Game Name</h3>
                        <p class="text-gray-400" id="topupGameCurrency">Currency</p>
                    </div>
                </div>
                <form id="topupForm" onsubmit="handleTopup(event)">
                    <div class="space-y-6">
                        <div><label class="block text-sm font-medium mb-2">User ID</label><input type="text" id="topupUserId" required class="input-field w-full px-4 py-3 rounded-xl" placeholder="Masukkan User ID"></div>
                        <div id="serverIdContainer"><label class="block text-sm font-medium mb-2">Server ID (Opsional)</label><input type="text" id="topupServerId" class="input-field w-full px-4 py-3 rounded-xl" placeholder="Masukkan Server ID"></div>
                        <div><label class="block text-sm font-medium mb-3">Pilih Nominal</label><div class="grid grid-cols-2 sm:grid-cols-3 gap-3" id="nominalGrid"></div></div>
                        
                        <!-- Payment Method in Top Up -->
                        <div>
                            <label class="block text-sm font-medium mb-3">Metode Pembayaran</label>
                            <div class="space-y-3" id="topupPaymentMethods">
                                <!-- Saldo -->
                                <div class="payment-card rounded-xl p-4 flex items-center justify-between cursor-pointer" data-method="saldo" onclick="selectPaymentMethod(this, 'topup')">
                                    <div class="flex items-center gap-3">
                                        <div class="w-10 h-10 rounded-lg bg-[#00ff88]/20 flex items-center justify-center">
                                            <svg class="w-5 h-5 text-[#00ff88]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"/></svg>
                                        </div>
                                        <div>
                                            <p class="font-semibold">Saldo NEXAPLAY</p>
                                            <p class="text-xs text-gray-400">Saldo: <span id="topupBalanceDisplay">Rp 0</span></p>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- E-Wallets -->
                                <div class="border-b border-[#2a2a3a] pb-2 mb-2"><span class="text-xs text-gray-500 font-semibold uppercase">E-Wallet (Manual)</span></div>
                                <div class="grid grid-cols-2 gap-3">
                                    <div class="payment-card rounded-xl p-3 flex items-center gap-3 cursor-pointer" data-method="dana" onclick="selectPaymentMethod(this, 'topup')">
                                        <div class="w-10 h-10 rounded-lg bg-[#108ee9] flex items-center justify-center text-white font-bold text-sm">D</div>
                                        <span class="font-semibold">DANA</span>
                                    </div>
                                    <div class="payment-card rounded-xl p-3 flex items-center gap-3 cursor-pointer" data-method="ovo" onclick="selectPaymentMethod(this, 'topup')">
                                        <div class="w-10 h-10 rounded-lg bg-[#4c3494] flex items-center justify-center text-white font-bold text-sm">O</div>
                                        <span class="font-semibold">OVO</span>
                                    </div>
                                    <div class="payment-card rounded-xl p-3 flex items-center gap-3 cursor-pointer" data-method="gopay" onclick="selectPaymentMethod(this, 'topup')">
                                        <div class="w-10 h-10 rounded-lg bg-[#00aa13] flex items-center justify-center text-white font-bold text-sm">G</div>
                                        <span class="font-semibold">GoPay</span>
                                    </div>
                                    <div class="payment-card rounded-xl p-3 flex items-center gap-3 cursor-pointer" data-method="qris" onclick="selectPaymentMethod(this, 'topup')">
                                        <div class="w-10 h-10 rounded-lg bg-[#e31937] flex items-center justify-center text-white font-bold text-sm">Q</div>
                                        <span class="font-semibold">QRIS</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="bg-[#0a0a0f] rounded-xl p-4 border border-[#2a2a3a]">
                            <div class="flex justify-between items-center mb-2"><span class="text-gray-400">Harga</span><span class="font-semibold" id="topupPrice">Rp 0</span></div>
                            <hr class="border-[#2a2a3a] my-3">
                            <div class="flex justify-between items-center"><span class="font-semibold">Total Bayar</span><span class="font-bold text-xl text-[#00ff88]" id="topupTotal">Rp 0</span></div>
                        </div>
                    </div>
                    <button type="submit" class="btn-primary w-full py-4 rounded-xl mt-6 text-lg">Bayar Sekarang</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Payment Instruction Modal -->
    <div class="fixed inset-0 z-50 hidden" id="paymentInstructionModal">
        <div class="modal-backdrop absolute inset-0"></div>
        <div class="relative min-h-screen flex items-center justify-center p-4">
            <div class="modal-content w-full max-w-md rounded-2xl p-8 max-h-[90vh] overflow-y-auto">
                <div class="text-center mb-6">
                    <!-- Timer -->
                    <div class="relative w-24 h-24 mx-auto mb-4">
                        <svg class="w-24 h-24" viewBox="0 0 100 100">
                            <circle cx="50" cy="50" r="45" fill="none" stroke="#2a2a3a" stroke-width="6"/>
                            <circle id="timerCircle" class="timer-circle" cx="50" cy="50" r="45" fill="none" stroke="#00ff88" stroke-width="6" stroke-linecap="round"/>
                        </svg>
                        <div class="absolute inset-0 flex items-center justify-center">
                            <span id="timerDisplay" class="text-2xl font-bold text-[#00ff88]">15:00</span>
                        </div>
                    </div>
                    <h3 class="font-display text-2xl font-bold mb-2">Instruksi Pembayaran</h3>
                    <p class="text-gray-400" id="paymentMethodTitle">Transfer ke rekening berikut</p>
                </div>

                <!-- Payment Details -->
                <div id="paymentDetailsContainer" class="space-y-4">
                    <!-- Will be filled by JS -->
                </div>

                <!-- Total Amount -->
                <div class="bg-[#0a0a0f] rounded-xl p-4 border border-[#2a2a3a] mt-4">
                    <div class="flex justify-between items-center">
                        <span class="text-gray-400">Total Pembayaran</span>
                        <span class="font-bold text-2xl text-[#00ff88]" id="paymentTotalAmount">Rp 0</span>
                    </div>
                </div>

                <!-- Instructions -->
                <div class="mt-6 p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-xl">
                    <h4 class="font-semibold text-yellow-400 mb-2">Petunjuk:</h4>
                    <ol class="text-sm text-gray-300 space-y-2 list-decimal list-inside" id="paymentInstructions">
                        <!-- Will be filled by JS -->
                    </ol>
                </div>

                <!-- Action Buttons -->
                <div class="mt-6 space-y-3">
                    <button onclick="confirmPayment()" class="btn-primary w-full py-4 rounded-xl text-lg animate-pulse-glow">
                        Saya Sudah Transfer
                    </button>
                    <button onclick="closeModal('paymentInstructionModal')" class="btn-secondary w-full py-3 rounded-xl">
                        Batalkan
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Joki Modal -->
    <div class="fixed inset-0 z-50 hidden" id="jokiModal">
        <div class="modal-backdrop absolute inset-0" onclick="closeModal('jokiModal')"></div>
        <div class="relative min-h-screen flex items-center justify-center p-4">
            <div class="modal-content w-full max-w-lg rounded-2xl p-8 max-h-[90vh] overflow-y-auto border-purple-500/30">
                <div class="flex items-center gap-4 mb-8">
                    <div class="w-16 h-16 rounded-xl bg-gradient-to-br from-purple-500/20 to-purple-700/10 border border-purple-500/30 flex items-center justify-center overflow-hidden">
                        <img id="jokiGameIcon" src="" alt="Game" class="w-full h-full object-cover">
                    </div>
                    <div>
                        <h3 class="font-display text-xl font-bold text-purple-400" id="jokiGameName">Joki Rank</h3>
                        <p class="text-gray-400" id="jokiPackageName">Package</p>
                    </div>
                </div>
                <form id="jokiForm" onsubmit="handleJokiOrder(event)">
                    <div class="space-y-6">
                        <div class="bg-purple-500/10 rounded-xl p-4 border border-purple-500/30">
                            <div class="flex justify-between items-center mb-2"><span class="text-gray-400">Rank Awal</span><span class="font-semibold text-purple-400" id="jokiRankFrom">-</span></div>
                            <div class="flex justify-center my-2"><svg class="w-6 h-6 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"/></svg></div>
                            <div class="flex justify-between items-center"><span class="text-gray-400">Rank Target</span><span class="font-semibold text-purple-400" id="jokiRankTo">-</span></div>
                        </div>
                        <div><label class="block text-sm font-medium mb-2">Login Method</label><select id="jokiLoginMethod" required class="input-field w-full px-4 py-3 rounded-xl bg-[#16161f]"><option value="">Pilih metode login</option><option value="moonton">Moonton (Email)</option><option value="facebook">Facebook</option><option value="vk">VK</option></select></div>
                        <div><label class="block text-sm font-medium mb-2">Email / Username</label><input type="text" id="jokiEmail" required class="input-field w-full px-4 py-3 rounded-xl" placeholder="Masukkan email/username akun"></div>
                        <div><label class="block text-sm font-medium mb-2">Password</label><input type="password" id="jokiPassword" required class="input-field w-full px-4 py-3 rounded-xl" placeholder="Masukkan password akun"></div>
                        <div><label class="block text-sm font-medium mb-2">Nomor WhatsApp</label><input type="tel" id="jokiPhone" required class="input-field w-full px-4 py-3 rounded-xl" placeholder="08xxxxxxxxxx"></div>
                        <div class="bg-[#0a0a0f] rounded-xl p-4 border border-purple-500/30">
                            <div class="flex justify-between items-center mb-2"><span class="text-gray-400">Harga Joki</span><span class="font-semibold" id="jokiPrice">Rp 0</span></div>
                            <hr class="border-[#2a2a3a] my-3">
                            <div class="flex justify-between items-center"><span class="font-semibold">Total</span><span class="font-bold text-xl text-purple-400" id="jokiTotal">Rp 0</span></div>
                        </div>
                    </div>
                    <button type="submit" class="btn-purple w-full py-4 rounded-xl mt-6 text-lg">Pesan Joki Sekarang</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Account Detail Modal -->
    <div class="fixed inset-0 z-50 hidden" id="accountDetailModal">
        <div class="modal-backdrop absolute inset-0" onclick="closeModal('accountDetailModal')"></div>
        <div class="relative min-h-screen flex items-center justify-center p-4">
            <div class="modal-content w-full max-w-3xl rounded-2xl p-8 max-h-[90vh] overflow-y-auto border-cyan-500/30">
                <div class="flex items-center justify-between mb-8">
                    <h3 class="font-display text-2xl font-bold text-cyan-400">Detail Akun</h3>
                    <button onclick="closeModal('accountDetailModal')" class="p-2 hover:bg-[#2a2a3a] rounded-lg transition-colors"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg></button>
                </div>
                <div id="accountDetailContent"></div>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div class="fixed inset-0 z-50 hidden" id="successModal">
        <div class="modal-backdrop absolute inset-0" onclick="closeModal('successModal')"></div>
        <div class="relative min-h-screen flex items-center justify-center p-4">
            <div class="modal-content w-full max-w-md rounded-2xl p-8 text-center">
                <div class="w-20 h-20 mx-auto mb-6 rounded-full bg-[#00ff88]/20 flex items-center justify-center"><svg class="w-10 h-10 text-[#00ff88]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg></div>
                <h3 class="font-display text-2xl font-bold mb-2">Transaksi Berhasil</h3>
                <p class="text-gray-400 mb-6" id="successMessage">Proses berhasil</p>
                <div class="bg-[#0a0a0f] rounded-xl p-4 mb-6 border border-[#2a2a3a] text-left" id="successDetails"></div>
                <button onclick="closeModal('successModal')" class="btn-primary w-full py-4 rounded-xl">Tutup</button>
            </div>
        </div>
    </div>

    <!-- History Modal -->
    <div class="fixed inset-0 z-50 hidden" id="historyModal">
        <div class="modal-backdrop absolute inset-0" onclick="closeModal('historyModal')"></div>
        <div class="relative min-h-screen flex items-center justify-center p-4">
            <div class="modal-content w-full max-w-2xl rounded-2xl p-8 max-h-[90vh] overflow-y-auto">
                <div class="flex items-center justify-between mb-8">
                    <h3 class="font-display text-2xl font-bold">Riwayat Transaksi</h3>
                    <button onclick="closeModal('historyModal')" class="p-2 hover:bg-[#2a2a3a] rounded-lg transition-colors"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg></button>
                </div>
                <div id="historyList" class="space-y-4"></div>
                <div class="hidden text-center py-12" id="emptyHistory"><svg class="w-16 h-16 mx-auto text-gray-600 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/></svg><p class="text-gray-400">Belum ada transaksi</p></div>
            </div>
        </div>
    </div>

    <script>
        // ==================== DATA ====================
        
        const gamesData = [
            { id: 1, name: "Mobile Legends", currency: "Diamond", image: "https://ar-hosting.pages.dev/1771798314688.jpg", category: "mobile", popular: true, nominals: [ { id: 1, amount: 86, price: 18000 }, { id: 2, amount: 172, price: 35000 }, { id: 3, amount: 257, price: 52000 }, { id: 4, amount: 344, price: 69000 }, { id: 5, amount: 514, price: 103000 }, { id: 6, amount: 706, price: 140000 } ] },
            { id: 2, name: "Free Fire", currency: "Diamond", image: "https://placehold.co/300x300/FF4500/FFFFFF?text=FF", category: "mobile", popular: true, nominals: [ { id: 1, amount: 70, price: 10000 }, { id: 2, amount: 140, price: 20000 }, { id: 3, amount: 355, price: 50000 }, { id: 4, amount: 720, price: 100000 } ] },
            { id: 3, name: "PUBG Mobile", currency: "UC", image: "https://placehold.co/300x300/F4C430/000000?text=PUBG", category: "mobile", popular: true, nominals: [ { id: 1, amount: 60, price: 15000 }, { id: 2, amount: 325, price: 75000 }, { id: 3, amount: 660, price: 150000 } ] },
            { id: 4, name: "Genshin Impact", currency: "Genesis Crystal", image: "https://placehold.co/300x300/00D4FF/FFFFFF?text=GI", category: "mobile", popular: true, nominals: [ { id: 1, amount: 60, price: 16000 }, { id: 2, amount: 300, price: 79000 }, { id: 3, amount: 980, price: 249000 } ] },
            { id: 5, name: "Valorant", currency: "VP", image: "https://placehold.co/300x300/FF4655/FFFFFF?text=VAL", category: "pc", popular: true, nominals: [ { id: 1, amount: 125, price: 15000 }, { id: 2, amount: 420, price: 50000 }, { id: 3, amount: 700, price: 80000 } ] }
        ];

        const jokiData = [
            { id: 1, game: "Mobile Legends", gameCode: "ml", image: "https://placehold.co/300x300/1E3A8A/FFFFFF?text=ML", packages: [ { id: "ml-1", name: "Warrior ke Elite", rankFrom: "Warrior", rankTo: "Elite", price: 50000, duration: "1 Hari" }, { id: "ml-2", name: "Master ke Grandmaster", rankFrom: "Master", rankTo: "Grandmaster", price: 100000, duration: "1-2 Hari" } ] },
            { id: 2, game: "Free Fire", gameCode: "ff", image: "https://placehold.co/300x300/FF4500/FFFFFF?text=FF", packages: [ { id: "ff-1", name: "Gold ke Platinum", rankFrom: "Gold", rankTo: "Platinum", price: 90000, duration: "2-3 Hari" } ] }
        ];

        const accountData = [
            { id: 1, game: "Mobile Legends", gameCode: "ml", image: "https://placehold.co/600x400/1E3A8A/FFFFFF?text=ML+Sultan", title: "Akun Sultan Skin Legend", price: 2500000, originalPrice: 3000000, level: 50, rank: "Mythical Glory", skinCount: 250, features: ["Skin Legend: 5", "Skin Epic: 25+"], verified: true, sold: false },
            { id: 2, game: "Free Fire", gameCode: "ff", image: "https://placehold.co/600x400/FF4500/FFFFFF?text=FF+EVO", title: "Akun FF Sultan Evo Weapon", price: 1200000, originalPrice: 1500000, level: 70, rank: "Heroic", skinCount: 180, features: ["Evo Weapon Max", "Bundle 50+"], verified: true, sold: false }
        ];

        // ==================== PAYMENT METHODS DATA ====================
        
        const paymentMethods = {
            dana: {
                name: "DANA",
                accountNumber: "081234567890",
                accountName: "NEXAPLAY Official",
                color: "#108ee9",
                instructions: [
                    "Buka aplikasi DANA di smartphone Anda",
                    "Pilih menu 'Kirim' atau 'Transfer'",
                    "Masukkan nomor DANA di atas",
                    "Masukkan nominal sesuai total pembayaran",
                    "Konfirmasi dan selesaikan pembayaran",
                    "Klik tombol 'Saya Sudah Transfer' di bawah"
                ]
            },
            ovo: {
                name: "OVO",
                accountNumber: "081234567890",
                accountName: "NEXAPLAY Official",
                color: "#4c3494",
                instructions: [
                    "Buka aplikasi OVO di smartphone Anda",
                    "Pilih menu 'Transfer' atau 'Kirim Uang'",
                    "Pilih 'Ke Sesama OVO'",
                    "Masukkan nomor OVO di atas",
                    "Masukkan nominal sesuai total pembayaran",
                    "Konfirmasi dan selesaikan pembayaran",
                    "Klik tombol 'Saya Sudah Transfer' di bawah"
                ]
            },
            gopay: {
                name: "GoPay",
                accountNumber: "081234567890",
                accountName: "NEXAPLAY Official",
                color: "#00aa13",
                instructions: [
                    "Buka aplikasi Gojek di smartphone Anda",
                    "Pilih menu 'GoPay' lalu 'Bayar'",
                    "Pilih 'Kirim ke Kontak/Nomor'",
                    "Masukkan nomor GoPay di atas",
                    "Masukkan nominal sesuai total pembayaran",
                    "Konfirmasi dan selesaikan pembayaran",
                    "Klik tombol 'Saya Sudah Transfer' di bawah"
                ]
            },
            qris: {
                name: "QRIS",
                qrImage: "https://api.qrserver.com/v1/create-qr-code/?size=250x250&data=00020101021126570011ID.DANA.WWW011893600915312345678902091234567890303UMI51440014ID.CO.QRIS.WWW0215ID20200277595810303UMI5204481453033605802ID5913NEXAPLAY OFFICIAL6007JAKARTA61051234062070703A0163049A6B",
                merchantName: "NEXAPLAY Official",
                color: "#e31937",
                instructions: [
                    "Buka aplikasi e-wallet atau mobile banking Anda",
                    "Pilih menu 'Scan QR' atau 'QRIS'",
                    "Scan QR Code di atas",
                    "Pastikan merchant adalah NEXAPLAY Official",
                    "Masukkan nominal sesuai total pembayaran",
                    "Konfirmasi dan selesaikan pembayaran",
                    "Klik tombol 'Saya Sudah Transfer' di bawah"
                ]
            }
        };

        // ==================== STATE ====================
        
        let currentUser = null;
        let selectedGame = null;
        let selectedNominal = null;
        let selectedDepositAmount = 0;
        let selectedPaymentMethod = 'saldo';
        let selectedJokiPackage = null;
        let selectedAccount = null;
        let pendingTransaction = null;
        let timerInterval = null;
        let timerSeconds = 900; // 15 minutes

        // ==================== INITIALIZATION ====================
        
        document.addEventListener('DOMContentLoaded', function() {
            checkAuth();
            renderGames();
            renderJoki();
            renderAccounts();
            setupEventListeners();
        });

        // ==================== AUTH & DEPOSIT ====================
        
        function checkAuth() { const s = localStorage.getItem('nexaplay_user'); if (s) { currentUser = JSON.parse(s); updateUIForLoggedInUser(); } }
        function updateUIForLoggedInUser() { if (!currentUser) return; document.getElementById('authButtons').classList.add('hidden'); document.getElementById('userMenu').classList.remove('hidden'); document.getElementById('userName').textContent = currentUser.name; document.getElementById('navBalance').textContent = formatCurrency(currentUser.balance); document.getElementById('mobileAuthButtons').classList.add('hidden'); document.getElementById('mobileUserMenu').classList.remove('hidden'); document.getElementById('mobileBalance').textContent = formatCurrency(currentUser.balance); }
        function updateUIForLoggedOutUser() { document.getElementById('authButtons').classList.remove('hidden'); document.getElementById('userMenu').classList.add('hidden'); document.getElementById('mobileAuthButtons').classList.remove('hidden'); document.getElementById('mobileUserMenu').classList.add('hidden'); }
        function handleLogin(e) { e.preventDefault(); const em = document.getElementById('loginEmail').value; const pw = document.getElementById('loginPassword').value; const u = JSON.parse(localStorage.getItem('nexaplay_users') || '[]').find(u => u.email === em && u.password === pw); if (u) { currentUser = u; localStorage.setItem('nexaplay_user', JSON.stringify(u)); closeModal('loginModal'); updateUIForLoggedInUser(); showToast('Berhasil masuk!', 'success'); } else { showToast('Email atau password salah!', 'error'); } }
        function handleRegister(e) { e.preventDefault(); const n = document.getElementById('registerName').value; const em = document.getElementById('registerEmail').value; const pw = document.getElementById('registerPassword').value; const pwc = document.getElementById('registerPasswordConfirm').value; if (pw !== pwc) { showToast('Password tidak cocok!', 'error'); return; } const u = JSON.parse(localStorage.getItem('nexaplay_users') || '[]'); if (u.find(x => x.email === em)) { showToast('Email sudah terdaftar!', 'error'); return; } const nu = { id: Date.now(), name: n, email: em, password: pw, balance: 0, createdAt: new Date().toISOString() }; u.push(nu); localStorage.setItem('nexaplay_users', JSON.stringify(u)); currentUser = nu; localStorage.setItem('nexaplay_user', JSON.stringify(nu)); closeModal('registerModal'); updateUIForLoggedInUser(); showToast('Pendaftaran berhasil!', 'success'); }
        function logout() { currentUser = null; localStorage.removeItem('nexaplay_user'); updateUIForLoggedOutUser(); showToast('Berhasil keluar', 'success'); }

        // ==================== PAYMENT & DEPOSIT ====================
        
        function selectDepositAmount(el) { document.querySelectorAll('#depositModal .nominal-card').forEach(c => c.classList.remove('selected')); el.classList.add('selected'); selectedDepositAmount = parseInt(el.dataset.amount); document.getElementById('depositAmount').value = selectedDepositAmount; }
        
        function selectPaymentMethod(el, type) {
            const containerId = type === 'deposit' ? 'depositPaymentMethods' : 'topupPaymentMethods';
            document.querySelectorAll(`#${containerId} .payment-card`).forEach(c => c.classList.remove('selected'));
            el.classList.add('selected');
            selectedPaymentMethod = el.dataset.method;
        }

        function handleDeposit(e) {
            e.preventDefault();
            if (!currentUser) { showToast('Silakan login terlebih dahulu', 'error'); closeModal('depositModal'); openModal('loginModal'); return; }
            const amount = parseInt(document.getElementById('depositAmount').value) || selectedDepositAmount;
            if (amount < 10000) { showToast('Minimal deposit Rp 10.000', 'error'); return; }
            if (!selectedPaymentMethod || selectedPaymentMethod === 'saldo') { 
                showToast('Pilih metode pembayaran', 'error'); 
                return; 
            }
            
            // Store pending transaction and show payment instruction
            pendingTransaction = {
                type: 'deposit',
                amount: amount,
                method: selectedPaymentMethod,
                description: `Deposit via ${paymentMethods[selectedPaymentMethod].name}`
            };
            
            closeModal('depositModal');
            showPaymentInstruction(amount);
        }

        // ==================== PAYMENT INSTRUCTION ====================
        
        function showPaymentInstruction(amount) {
            const method = paymentMethods[selectedPaymentMethod];
            if (!method) return;
            
            document.getElementById('paymentMethodTitle').textContent = `Transfer ke ${method.name}`;
            document.getElementById('paymentTotalAmount').textContent = formatCurrency(amount);
            
            // Build payment details
            let detailsHTML = '';
            
            if (selectedPaymentMethod === 'qris') {
                // QRIS with QR Code
                detailsHTML = `
                    <div class="text-center">
                        <div class="qr-container mb-4">
                            <img src="${method.qrImage}" alt="QR Code QRIS" class="w-48 h-48">
                        </div>
                        <p class="text-sm text-gray-400">Scan QR Code di atas dengan aplikasi e-wallet atau mobile banking Anda</p>
                    </div>
                    <div class="bg-[#0a0a0f] rounded-xl p-4 border border-[#2a2a3a]">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Merchant</span>
                            <span class="font-semibold">${method.merchantName}</span>
                        </div>
                    </div>
                `;
            } else {
                // E-Wallet with account number
                detailsHTML = `
                    <div class="bg-[#0a0a0f] rounded-xl p-4 border border-[#2a2a3a] space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Metode</span>
                            <span class="font-semibold" style="color: ${method.color}">${method.name}</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Nomor ${method.name}</span>
                            <div class="flex items-center gap-2">
                                <span class="font-mono font-bold text-lg">${method.accountNumber}</span>
                                <button onclick="copyToClipboard('${method.accountNumber}')" class="copy-btn px-2 py-1 rounded text-xs">
                                    Salin
                                </button>
                            </div>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Atas Nama</span>
                            <span class="font-semibold">${method.accountName}</span>
                        </div>
                    </div>
                `;
            }
            
            document.getElementById('paymentDetailsContainer').innerHTML = detailsHTML;
            
            // Build instructions
            const instructionsHTML = method.instructions.map((inst, i) => `<li>${inst}</li>`).join('');
            document.getElementById('paymentInstructions').innerHTML = instructionsHTML;
            
            // Start timer
            startTimer();
            
            openModal('paymentInstructionModal');
        }

        function startTimer() {
            timerSeconds = 900; // 15 minutes
            updateTimerDisplay();
            
            if (timerInterval) clearInterval(timerInterval);
            
            timerInterval = setInterval(() => {
                timerSeconds--;
                updateTimerDisplay();
                
                if (timerSeconds <= 0) {
                    clearInterval(timerInterval);
                    closeModal('paymentInstructionModal');
                    showToast('Waktu pembayaran habis', 'error');
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timerSeconds / 60);
            const seconds = timerSeconds % 60;
            document.getElementById('timerDisplay').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            // Update circle
            const circle = document.getElementById('timerCircle');
            const progress = (900 - timerSeconds) / 900;
            circle.style.strokeDashoffset = 283 * progress;
            
            // Change color when time is running out
            if (timerSeconds <= 60) {
                circle.style.stroke = '#ff4757';
                document.getElementById('timerDisplay').style.color = '#ff4757';
            }
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                showToast('Nomor berhasil disalin!', 'success');
            }).catch(() => {
                // Fallback for older browsers
                const input = document.createElement('input');
                input.value = text;
                document.body.appendChild(input);
                input.select();
                document.execCommand('copy');
                document.body.removeChild(input);
                showToast('Nomor berhasil disalin!', 'success');
            });
        }

        function confirmPayment() {
            if (!pendingTransaction) return;
            
            // Clear timer
            if (timerInterval) clearInterval(timerInterval);
            
            // Process transaction (simulate success)
            if (pendingTransaction.type === 'deposit') {
                currentUser.balance += pendingTransaction.amount;
                localStorage.setItem('nexaplay_user', JSON.stringify(currentUser));
                const u = JSON.parse(localStorage.getItem('nexaplay_users') || '[]'); 
                const i = u.findIndex(x => x.id === currentUser.id); 
                if (i !== -1) { u[i] = currentUser; localStorage.setItem('nexaplay_users', JSON.stringify(u)); }
                
                addTransaction({ 
                    type: 'deposit', 
                    amount: pendingTransaction.amount, 
                    method: pendingTransaction.method, 
                    status: 'pending', 
                    description: pendingTransaction.description 
                });
                
                updateUIForLoggedInUser(); 
                closeModal('paymentInstructionModal');
                
                showSuccessModal('Pembayaran Diterima!', { 
                    'Metode': paymentMethods[pendingTransaction.method].name,
                    'Jumlah': formatCurrency(pendingTransaction.amount), 
                    'Status': 'Menunggu Konfirmasi',
                    'Saldo': formatCurrency(currentUser.balance) 
                });
            } else if (pendingTransaction.type === 'topup') {
                processTopupPayment();
            }
            
            // Reset
            pendingTransaction = null;
            selectedDepositAmount = 0; 
            document.getElementById('depositAmount').value = '';
        }

        // ==================== TOP UP ====================
        
        function openTopupModal(gId) {
            if (!currentUser) { showToast('Silakan login terlebih dahulu', 'error'); openModal('loginModal'); return; }
            selectedGame = gamesData.find(g => g.id === gId); if (!selectedGame) return;
            selectedNominal = null; selectedPaymentMethod = 'saldo';
            
            document.getElementById('topupGameIcon').src = selectedGame.image;
            document.getElementById('topupGameName').textContent = selectedGame.name;
            document.getElementById('topupGameCurrency').textContent = selectedGame.currency;
            document.getElementById('topupBalanceDisplay').textContent = formatCurrency(currentUser.balance);
            
            document.getElementById('serverIdContainer').style.display = selectedGame.id === 1 ? 'block' : 'none';
            
            renderNominals();
            
            document.querySelectorAll('#topupPaymentMethods .payment-card').forEach(c => c.classList.remove('selected'));
            document.querySelector('#topupPaymentMethods .payment-card[data-method="saldo"]').classList.add('selected');
            
            openModal('topupModal');
        }

        function renderNominals() { const g = document.getElementById('nominalGrid'); g.innerHTML = selectedGame.nominals.map(n => `<div class="nominal-card rounded-xl p-4 text-center" onclick="selectNominal(${n.id}, this)"><p class="font-bold text-lg">${n.amount.toLocaleString()}</p><p class="text-[#00ff88] font-semibold mt-2">${formatCurrency(n.price)}</p></div>`).join(''); }
        function selectNominal(id, el) { document.querySelectorAll('#nominalGrid .nominal-card').forEach(c => c.classList.remove('selected')); el.classList.add('selected'); selectedNominal = selectedGame.nominals.find(n => n.id === id); updateTopupPrice(); }
        function updateTopupPrice() { if (selectedNominal) { document.getElementById('topupPrice').textContent = formatCurrency(selectedNominal.price); document.getElementById('topupTotal').textContent = formatCurrency(selectedNominal.price); } else { document.getElementById('topupPrice').textContent = 'Rp 0'; document.getElementById('topupTotal').textContent = 'Rp 0'; } }

        function handleTopup(e) {
            e.preventDefault();
            if (!currentUser || !selectedGame || !selectedNominal) { showToast('Pilih nominal', 'error'); return; }
            const uid = document.getElementById('topupUserId').value; if (!uid) { showToast('Masukkan User ID', 'error'); return; }
            
            const price = selectedNominal.price;
            
            if (selectedPaymentMethod === 'saldo') {
                if (currentUser.balance < price) { showToast('Saldo tidak cukup. Silakan pilih metode lain atau deposit.', 'error'); return; }
                currentUser.balance -= price;
                localStorage.setItem('nexaplay_user', JSON.stringify(currentUser));
                const u = JSON.parse(localStorage.getItem('nexaplay_users') || '[]'); const i = u.findIndex(x => x.id === currentUser.id); if (i !== -1) { u[i] = currentUser; localStorage.setItem('nexaplay_users', JSON.stringify(u)); }
                
                addTransaction({ type: 'topup', gameName: selectedGame.name, amount: selectedNominal.amount, price: price, userId: uid, method: 'saldo', status: 'success', description: `Top up ${selectedGame.name}` });
                closeModal('topupModal');
                showSuccessModal('Top up berhasil!', { 'Game': selectedGame.name, 'Item': `${selectedNominal.amount} ${selectedGame.currency}`, 'Metode': 'Saldo NEXAPLAY', 'Total': formatCurrency(price) });
                document.getElementById('topupForm').reset(); selectedNominal = null; updateTopupPrice();
                updateUIForLoggedInUser();
            } else {
                // Use external payment method
                pendingTransaction = {
                    type: 'topup',
                    gameName: selectedGame.name,
                    amount: selectedNominal.amount,
                    price: price,
                    userId: uid,
                    method: selectedPaymentMethod,
                    description: `Top up ${selectedGame.name}`
                };
                
                closeModal('topupModal');
                showPaymentInstruction(price);
            }
        }

        function processTopupPayment() {
            if (!pendingTransaction) return;
            
            addTransaction({ 
                type: 'topup', 
                gameName: pendingTransaction.gameName, 
                amount: pendingTransaction.amount, 
                price: pendingTransaction.price, 
                userId: pendingTransaction.userId,
                method: pendingTransaction.method, 
                status: 'pending', 
                description: pendingTransaction.description 
            });
            
            closeModal('paymentInstructionModal');
            showSuccessModal('Pembayaran Diterima!', { 
                'Game': pendingTransaction.gameName,
                'Item': `${pendingTransaction.amount} Diamond`,
                'User ID': pendingTransaction.userId,
                'Metode': paymentMethods[pendingTransaction.method].name,
                'Total': formatCurrency(pendingTransaction.price),
                'Status': 'Menunggu Konfirmasi'
            });
            
            document.getElementById('topupForm').reset(); 
            selectedNominal = null; 
            updateTopupPrice();
        }

        // ==================== JOKI ====================
        
        function renderJoki(f = 'all') { const g = document.getElementById('jokiGrid'); let d = jokiData; if (f !== 'all') d = d.filter(j => j.gameCode === f); g.innerHTML = d.map(game => game.packages.map(pkg => `<div class="joki-card rounded-2xl overflow-hidden cursor-pointer" onclick="openJokiModal('${game.gameCode}', '${pkg.id}')"><div class="aspect-video relative overflow-hidden"><img src="${game.image}" alt="${game.game}" class="w-full h-full object-cover opacity-70"></div><div class="p-6"><span class="text-sm text-gray-400">${game.game}</span><h3 class="font-semibold text-lg mb-3">${pkg.name}</h3><div class="flex justify-between items-center"><span class="rank-badge ${getRankClass(pkg.rankFrom)}">${pkg.rankFrom}</span><svg class="w-5 h-5 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg><span class="rank-badge ${getRankClass(pkg.rankTo)}">${pkg.rankTo}</span></div><div class="flex justify-between items-center mt-4 pt-4 border-t border-[#2a2a3a]"><p class="text-xl font-bold text-purple-400">${formatCurrency(pkg.price)}</p><button class="btn-purple px-4 py-2 rounded-lg text-sm">Pesan</button></div></div></div>`).join('')).join(''); }
        function openJokiModal(gc, pid) { if (!currentUser) { showToast('Login dulu', 'error'); openModal('loginModal'); return; } const game = jokiData.find(g => g.gameCode === gc); const pkg = game.packages.find(p => p.id === pid); selectedJokiPackage = { game, package: pkg }; document.getElementById('jokiGameIcon').src = game.image; document.getElementById('jokiGameName').textContent = game.game; document.getElementById('jokiPackageName').textContent = pkg.name; document.getElementById('jokiRankFrom').textContent = pkg.rankFrom; document.getElementById('jokiRankTo').textContent = pkg.rankTo; document.getElementById('jokiPrice').textContent = formatCurrency(pkg.price); document.getElementById('jokiTotal').textContent = formatCurrency(pkg.price); openModal('jokiModal'); }
        function handleJokiOrder(e) { e.preventDefault(); if (!currentUser || !selectedJokiPackage) return; const p = selectedJokiPackage.package.price; if (currentUser.balance < p) { showToast('Saldo tidak cukup', 'error'); return; } currentUser.balance -= p; localStorage.setItem('nexaplay_user', JSON.stringify(currentUser)); const u = JSON.parse(localStorage.getItem('nexaplay_users') || '[]'); const i = u.findIndex(x => x.id === currentUser.id); if (i !== -1) { u[i] = currentUser; localStorage.setItem('nexaplay_users', JSON.stringify(u)); } addTransaction({ type: 'joki', gameName: selectedJokiPackage.game.game, price: p, status: 'processing', description: `Joki ${selectedJokiPackage.package.name}` }); updateUIForLoggedInUser(); closeModal('jokiModal'); showSuccessModal('Pesanan Diterima!', { 'Layanan': `Joki ${selectedJokiPackage.game.game}`, 'Rank': `${selectedJokiPackage.package.rankFrom} -> ${selectedJokiPackage.package.rankTo}`, 'Biaya': formatCurrency(p) }); }

        // ==================== ACCOUNT ====================
        
        function renderAccounts(f = 'all') { const g = document.getElementById('accountGrid'); let d = accountData; if (f !== 'all') d = d.filter(a => a.gameCode === f); g.innerHTML = d.map(a => `<div class="account-card rounded-2xl overflow-hidden cursor-pointer" onclick="openAccountDetail(${a.id})"><div class="aspect-video relative overflow-hidden"><img src="${a.image}" alt="${a.title}" class="w-full h-full object-cover"></div><div class="p-6"><span class="text-sm text-gray-400">${a.game}</span><h3 class="font-semibold text-lg mb-2">${a.title}</h3><div class="flex items-center gap-2 mb-4"><span class="rank-badge ${getRankClass(a.rank)}">${a.rank}</span></div><div class="flex justify-between items-end pt-4 border-t border-[#2a2a3a]"><div><p class="text-xs text-gray-500 line-through">${formatCurrency(a.originalPrice)}</p><p class="text-2xl font-bold text-cyan-400">${formatCurrency(a.price)}</p></div><button class="btn-info px-4 py-2 rounded-lg text-sm">Detail</button></div></div></div>`).join(''); }
        function openAccountDetail(id) { selectedAccount = accountData.find(a => a.id === id); if (!selectedAccount) return; const c = document.getElementById('accountDetailContent'); c.innerHTML = `<div class="grid md:grid-cols-2 gap-8"><img src="${selectedAccount.image}" alt="${selectedAccount.title}" class="w-full rounded-xl"><div><h2 class="font-display text-2xl font-bold mb-2">${selectedAccount.title}</h2><p class="text-gray-400 mb-4">${selectedAccount.game} - Level ${selectedAccount.level}</p><div class="bg-[#0a0a0f] rounded-xl p-4 mb-6 border border-[#2a2a3a]"><h4 class="font-semibold mb-3">Fitur:</h4><ul class="space-y-1 text-sm text-gray-400">${selectedAccount.features.map(f => `<li>- ${f}</li>`).join('')}</ul></div><p class="text-3xl font-bold text-cyan-400 mb-6">${formatCurrency(selectedAccount.price)}</p><button onclick="buyAccount()" class="btn-info w-full py-4 rounded-xl text-lg">Beli Sekarang</button></div></div>`; openModal('accountDetailModal'); }
        function buyAccount() { if (!currentUser) { showToast('Login dulu', 'error'); return; } if (!selectedAccount) return; if (currentUser.balance < selectedAccount.price) { showToast('Saldo tidak cukup', 'error'); return; } currentUser.balance -= selectedAccount.price; localStorage.setItem('nexaplay_user', JSON.stringify(currentUser)); const u = JSON.parse(localStorage.getItem('nexaplay_users') || '[]'); const i = u.findIndex(x => x.id === currentUser.id); if (i !== -1) { u[i] = currentUser; localStorage.setItem('nexaplay_users', JSON.stringify(u)); } addTransaction({ type: 'account', gameName: selectedAccount.game, price: selectedAccount.price, status: 'success', description: `Beli Akun ${selectedAccount.title}` }); updateUIForLoggedInUser(); closeModal('accountDetailModal'); showSuccessModal('Pembelian Berhasil!', { 'Item': selectedAccount.title, 'Harga': formatCurrency(selectedAccount.price) }); }

        // ==================== UTILITIES ====================
        
        function addTransaction(d) { const t = JSON.parse(localStorage.getItem('nexaplay_transactions') || '[]'); t.unshift({ id: Date.now(), ...d, date: new Date().toISOString(), userId: currentUser?.id }); localStorage.setItem('nexaplay_transactions', JSON.stringify(t)); }
        function renderGames(f = 'all', s = '') { let d = gamesData; if (f !== 'all') d = d.filter(g => g.category === f); if (s) d = d.filter(g => g.name.toLowerCase().includes(s.toLowerCase())); document.getElementById('gamesGrid').innerHTML = d.map(g => `<div class="game-card rounded-2xl overflow-hidden cursor-pointer" onclick="openTopupModal(${g.id})"><div class="aspect-square relative overflow-hidden"><img src="${g.image}" alt="${g.name}" class="w-full h-full object-cover"></div><div class="p-4"><h3 class="font-semibold text-sm mb-1">${g.name}</h3><p class="text-[#00ff88] text-xs">${g.currency}</p></div></div>`).join(''); }
        function setupEventListeners() { document.getElementById('searchGame').addEventListener('input', (e) => { const a = document.querySelector('.filter-btn.active')?.dataset.filter || 'all'; renderGames(a, e.target.value); }); document.querySelectorAll('.filter-btn').forEach(btn => { btn.addEventListener('click', function() { document.querySelectorAll('.filter-btn').forEach(b => { b.classList.remove('active', 'bg-[#00ff88]', 'text-black'); b.classList.add('bg-[#16161f]', 'text-gray-400'); }); this.classList.add('active', 'bg-[#00ff88]', 'text-black'); this.classList.remove('bg-[#16161f]', 'text-gray-400'); renderGames(this.dataset.filter, document.getElementById('searchGame').value); }); }); document.getElementById('depositAmount').addEventListener('input', function() { document.querySelectorAll('#depositModal .nominal-card').forEach(c => c.classList.remove('selected')); selectedDepositAmount = parseInt(this.value) || 0; }); }
        function getRankClass(r) { const l = r.toLowerCase(); if (l.includes('warrior')) return 'rank-bronze'; if (l.includes('elite')) return 'rank-silver'; if (l.includes('master')) return 'rank-gold'; if (l.includes('grandmaster')) return 'rank-platinum'; if (l.includes('epic')) return 'rank-diamond'; if (l.includes('legend')) return 'rank-master'; if (l.includes('mythical')) return 'rank-mythical-glory'; if (l.includes('mythic')) return 'rank-mythic'; if (l.includes('heroic')) return 'rank-master'; if (l.includes('platinum')) return 'rank-platinum'; if (l.includes('diamond')) return 'rank-diamond'; if (l.includes('gold')) return 'rank-gold'; return 'rank-gold'; }
        function formatCurrency(a) { return new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', minimumFractionDigits: 0 }).format(a); }
        function toggleMobileMenu() { document.getElementById('mobileMenu').classList.toggle('active'); }
        function showToast(m, t = 'success') { const e = document.querySelector('.toast'); if (e) e.remove(); const ts = document.createElement('div'); ts.className = `toast toast-${t}`; ts.textContent = m; document.body.appendChild(ts); setTimeout(() => ts.remove(), 3000); }
        function showSuccessModal(m, d) { document.getElementById('successMessage').textContent = m; document.getElementById('successDetails').innerHTML = Object.entries(d).map(([k, v]) => `<div class="flex justify-between py-2"><span class="text-gray-400">${k}</span><span class="font-semibold">${v}</span></div>`).join(''); openModal('successModal'); }
        function openModal(id) { document.getElementById(id).classList.remove('hidden'); document.body.style.overflow = 'hidden'; if (id === 'historyModal') renderHistory(); }
        function closeModal(id) { document.getElementById(id).classList.add('hidden'); document.body.style.overflow = ''; }
        function renderHistory() { const t = JSON.parse(localStorage.getItem('nexaplay_transactions') || '[]').filter(x => x.userId === currentUser?.id); const l = document.getElementById('historyList'); const e = document.getElementById('emptyHistory'); if (t.length === 0) { l.innerHTML = ''; e.classList.remove('hidden'); return; } e.classList.add('hidden'); l.innerHTML = t.map(x => `<div class="bg-[#0a0a0f] rounded-xl p-4 border border-[#2a2a3a]"><div class="flex justify-between items-center mb-2"><span class="font-semibold">${x.description}</span><span class="text-xs ${x.status === 'success' ? 'text-green-400' : x.status === 'pending' ? 'text-yellow-400' : 'text-blue-400'}">${x.status === 'pending' ? 'Menunggu' : x.status === 'success' ? 'Sukses' : 'Diproses'}</span></div><p class="text-sm text-gray-400">${new Date(x.date).toLocaleString('id-ID')}</p><p class="text-lg font-bold mt-2">${formatCurrency(x.price || x.amount)}</p></div>`).join(''); }
    </script>
</body>
</html>
